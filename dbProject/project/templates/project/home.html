{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Registro Cliente</title>
    <link rel="stylesheet" href="{% static 'project/style.css' %}">
</head>
<body>
    <div class="registro-wrapper">
        <h2 class="titulo-form">REGISTRO CLIENTE</h2>
        {% if messages %}
        <ul class="mensajes">
            {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <form id="formRegistro" method="POST" action="{% url 'agregarCliente' %}" autocomplete="off">
            {% csrf_token %}
            <div class="campo linea-codigo">
                <label for="idCodigo">C√≥digo</label>
                <input type="text" name="txtCodigo" id="idCodigo" maxlength="5" required>
                <button type="button" id="btnBuscar" class="boton-icono" title="Buscar">
                    üîç
                </button>
            </div>
            <div class="campo">
                <label for="idNombre">Nombre</label>
                <input type="text" name="txtNombre" id="idNombre" maxlength="30" required>
            </div>
            <div class="campo">
                <label for="idApellido">Apellido</label>
                <input type="text" name="txtApellido" id="idApellido" maxlength="30" required>
            </div>
            <div class="campo">
                <label for="idNumDocumento">nDocumento</label>
                <input type="text" name="txtNumDocumento" id="idNumDocumento" maxlength="15" required>
            </div>
            <div class="campo">
                <label for="idTipoDocumento">Tipo Documento</label>
                <select name="TipoDocumento" id="idTipoDocumento" required>
                    <option value="">-- Seleccione --</option>
                    <option value="CC">CC - C√©dula de Ciudadan√≠a</option>
                    <option value="CE">CE - Carnet de Extranjer√≠a</option>
                    <option value="TI">TI - Tarjeta de Identidad</option>
                </select>
            </div>
            <div class="acciones">
                <button type="submit" class="btn-guardar">Guardar</button>
            </div>
        </form>
    </div>

    <script>
        (function() {
            const btnBuscar = document.getElementById('btnBuscar');
            const inputCodigo = document.getElementById('idCodigo');
            btnBuscar.addEventListener('click', function() {
                const codigo = (inputCodigo.value || '').trim();
                if (!codigo) {
                    alert('Ingrese un c√≥digo para buscar');
                    inputCodigo.focus();
                    return;
                }
                const url = `${window.location.origin}{% url 'buscarCliente' 'CODIGO_PLACEHOLDER' %}`.replace('CODIGO_PLACEHOLDER', encodeURIComponent(codigo));
                window.location.href = url;
            });
        })();
    </script>
</body>
</html>
